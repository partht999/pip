<html>
<head>
    <title>Python Code Display</title>
</head>
<body>

<pre><code>

import numpy as np
import matplotlib.pyplot as plt
import seaborn as sn
import pandas as pd
def simple_linear_regression(X, Y, plot_title="Linear Regression"):
    """
    Perform Simple Linear Regression manually using Normal Equation or lstsq
    and plot regression line + residuals. Returns intercept, slope, R².
    """
    X = np.array(X)
    Y = np.array(Y)

    # Add intercept column
    X_b = np.c_[np.ones((len(X),1)), X]  # [1, X] for intercept + slope

    # Calculate coefficients using Normal Equation
    theta = np.linalg.inv(X_b.T @ X_b) @ X_b.T @ Y
    intercept, slope = theta

    # Predictions
    Y_pred = X_b @ theta

    # Residuals
    residuals = Y - Y_pred

    # R² Score
    SS_res = np.sum(residuals**2)
    SS_tot = np.sum((Y - np.mean(Y))**2)
    R2 = 1 - (SS_res / SS_tot)

    print(f"{plot_title}")
    print(f"Intercept (β0): {intercept:.4f}, Slope (β1): {slope:.4f}")
    print(f"R² Score: {R2:.4f}\n")

    # Plot data + regression line
    plt.figure(figsize=(6,4))
    plt.scatter(X, Y, color='blue', label='Actual Data')
    plt.plot(X, Y_pred, color='red', label='Regression Line')
    plt.title(plot_title)
    plt.xlabel("X")
    plt.ylabel("Y")
    plt.legend()
    plt.show()

    # Plot residuals
    plt.figure(figsize=(6,4))
    plt.scatter(Y_pred, residuals, color='purple')
    plt.axhline(0, color='black', linestyle='--')
    plt.title(f"Residual Plot: {plot_title}")
    plt.xlabel("Predicted Y")
    plt.ylabel("Residuals")
    plt.show()

    return intercept, slope, R2

np.random.seed(42)
height = np.random.normal(170,10,100)
weight = height * 0.5 + np.random.normal(0,5,100)
data = {'height' : height , 'weight' : weight}
df = pd.DataFrame(data)
X = df['height'].values
Y = df['weight'].values
simple_linear_regression(X, Y, plot_title="Hours vs Exam Score")
</code></pre>

</body>
</html>
