
#include <stdio.h>
void display_cache(int cache[], int lines) {
 printf("\nCache Status:\n");
 for (int i = 0; i < lines; i++) {
 if (cache[i] == -1)
 printf("Line %d -> [Empty]\n", i);
 else
 printf("Line %d -> Block %d\n", i, cache[i]);
 }
}
int main() {
 int memory, cache, block_size, line_size;
 int line_num, block_num, choice;
 int hits = 0, misses = 0;
 printf("Enter the memory size in bytes: ");
 scanf("%d", &memory);
 printf("Enter the cache memory size in bytes: ");
 scanf("%d", &cache);
 printf("Enter the block size in bytes: ");
 scanf("%d", &block_size);
 printf("Enter the line size in bytes: ");
 scanf("%d", &line_size);
 if (memory <= 0 || cache <= 0 || block_size <= 0 || line_size <= 0) {
 printf("Error: All inputs must be positive non-zero values.\n");
 return 1;
 }
 line_num = cache / line_size;
 block_num = memory / block_size;
 int cacheLines[line_num];
 for (int i = 0; i < line_num; i++)
 cacheLines[i] = -1;
 printf("\nTotal Cache Lines = %d\n", line_num);
 printf("Total Memory Blocks = %d\n", block_num);
 do {
 int block;
 printf("\nEnter the block number to access (0-%d): ", block_num - 1);
 scanf("%d", &block);
 if (block < 0 || block >= block_num) {
 printf("Invalid block number!\n");
 continue;
 }
 int cache_line = block % line_num;
 if (cacheLines[cache_line] == block) {
 printf("HIT! Block %d found in Cache Line %d.\n", block, cache_line);
 hits++;
 } else {
 printf("MISS! Block %d not in cache. Inserting...\n", block);
 cacheLines[cache_line] = block;
 misses++;
 }
 display_cache(cacheLines, line_num);
 printf("\nHits: %d | Misses: %d | Hit Ratio: %.2f%%\n", hits, misses,
 (hits + misses) ? (100.0 * hits / (hits + misses)) : 0);
 printf("\nPress 1 to continue, 0 to exit: ");
 scanf("%d", &choice);
 } while (choice == 1);
 printf("\nSimulation ended.\n");
 return 0;
}
